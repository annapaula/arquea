{% load proto_tags %}
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
@import url('/var/www/media/css/pdf.css');


@page {
  size:a4 landscape;
          background-image: url('/var/www/media/img/papel_timbrado_paisagem.jpg');
  top: 3.6cm;
  left: 1.5cm;
  right: 1.5cm;
  bottom: 2cm;
  @frame footer {
                -pdf-frame-content: footerContent;
                bottom: 0.5cm;
                margin-right: 1cm;
                height: 1cm;
                left: -2.3cm;
                }
}
th {text-align: left;}
tr, th, td {
    page-break-inside: avoid;
}
 .level1 {
    color:#102BB2; 
 }
 .level1 .level_btn {
    display:list-item;
    list-style:square inside;
 }
 .level2 {
     color:#FF6500; 
 }
 .level2 .level_btn {
    display:list-item;
    list-style:circle inside;
    padding-left:15px;
 }
 .level3 {
    color:#56B209; 
 }
 .level3 .level_btn {
    display:list-item;
    list-style:disc inside;
    padding-left:30px;
 }
 .level0.tr_border {
    border-top:1px darkgray solid;
 }
 .level0 {
 }
 td:nth-child(2),
 td:nth-child(6),
 td:nth-child(7) {
 width:1px;
    white-space:nowrap;
 }
 
</style>

</head>
<body>
<h1 repeat="1">Inventário por local</h1>

{% for end in enderecos %}
    <h4>
        {% if end.endereco %}
            {{ end.endereco }}
        {% else %}
            {{ end.detalhe }}
        {% endif %}
    </h4>
    {% for d in end.detalhes %}
            <p></p>
            <table style="border:1px black solid; padding:3px;"><tr><td><strong>{{ d.detalhe }}</strong></td></tr></table>
            <table border="0" repeat="1" cellpadding="5" width="100%">
            <tr style="background-color:lightgray;font-weight:bold; border:1px black solid;">
                <th style="width:5%">ID</th>
                <th style="width:7%">Processo</th>
                <th style="width:6%">N.FMUSP</th>
                <th style="width:9%">NF</th>
                <th style="width:5%">Marca</th>
                <th style="width:15%">Modelo</th>
                <th style="width:10%">Part number</th>
                <th style="width:7%">NS</th>
                <th style="width:24%">Descrição</th>
                <th style="width:7%">Posição</th>
                <th style="width:5%">Estado</th>
            </tr>
           {% for p in d.patrimonio %}
              <tr class="patr level0 tr_border" id="tr_{{p.id}}">
                <td style="width:5%"><div class="level_btn"></div>{{ p.id }}</td>
                <td style="width:7%">{{ p.termo }}</td>
                <td style="width:6%">{{ p.fmusp|default:'' }}</td>
                <td style="width:9%">{{ p.num_documento }}</td>
                <td style="width:5%">{{ p.marca }}</td>
                <td style="width:15%">{{ p.modelo }}</td>
                <td style="width:10%">{{ p.part_number }}</td>
                <td style="width:7%">{{ p.ns }}</td>
                <td style="width:24%">{{ p.descricao }} - {{ p.complemento }}</td>
                <td style="width:7%">{{ p.posicao|default:'' }}</td>
                <td style="width:5%">{{ p.estado }}</td>
              </tr>
              {% for f in p.contido %}
                 <tr class="patr level1 {% if forloop.last %} tr_border{% endif %}" id="tr_{{f.id}}">
                    <td><div class="level_btn"></div></td>
                    <td>{{ f.termo }}</td>
                    <td>{{ f.fmusp|default:'' }}</td>
                    <td>{{ f.num_documento }}</td>
                    <td>{{ f.marca }}</td>
                    <td>{{ f.modelo }}</td>
                    <td>{{ f.part_number }}</td>
                    <td>{{ f.ns }}</td>
                    <td>{{ f.descricao }}</td>
                    <td>{{ f.posicao|default:'' }}</td>
                    <td>{{ f.estado }}</td>
                  </tr>
                  {% for g in f.contido %}
                     <tr class="patr level2 {% if forloop.last %} tr_border{% endif %}" id="tr_{{g.id}}">
                        <td><div class="level_btn"></div></td>
                        <td>{{ g.termo }}</td>
                        <td>{{ g.fmusp|default:'' }}</td>
                        <td>{{ g.num_documento }}</td>
                        <td>{{ g.marca }}</td>
                        <td>{{ g.modelo }}</td>
                        <td>{{ g.part_number }}</td>
                        <td>{{ g.ns }}</td>
                        <td>{{ g.descricao }}</td>
                        <td>{{ g.posicao|default:'' }}</td>
                        <td>{{ g.estado }}</td>
                      </tr>
                     {% for h in g.contido %}
                        <tr class="patr level3 {% if forloop.last %} tr_border{% endif %}" id="tr_{{h.id}}">
                            <td><div class="level_btn"></div></td>
                            <td>{{ h.termo }}</td>
                            <td>{{ h.fmusp|default:'' }}</td>
                            <td>{{ h.num_documento }}</td>
                            <td>{{ h.marca }}</td>
                            <td>{{ h.modelo }}</td>
                            <td>{{ h.part_number }}</td>
                            <td>{{ h.ns }}</td>
                            <td>{{ h.descricao }}</td>
                            <td>{{ h.posicao|default:'' }}</td>
                            <td>{{ h.estado }}</td>
                         </tr>
                     {% endfor %}
                 {% endfor %}
              {% endfor %}
           {% endfor %}
    {% endfor %}
    </table>
{% endfor %}

</body>
</html>
