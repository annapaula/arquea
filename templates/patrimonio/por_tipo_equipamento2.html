{% extends "admin/base_site.html" %}
{% load proto_tags %}
{% block extrastyle %}
<style type="text/css">
  div.col1 {float:left; min-width:200px;}
  div.col2 {float:right;}
  div.menor {float:left; width:60px;}
  div.medio {float:left; width:153px;}
  div.maior {float:left; width:250px; white-space:normal; margin-right:5px;}
  ins {float:left;}
  div#theader {font-weight:bold;}
  div#blocos {overflow:hidden;}
  </style>
{% endblock %}
{% block extrahead %}
<script type="text/javascript" src="/media/js/jstree/_lib/jquery.js"></script>
<script type="text/javascript" src="/media/js/jstree/jquery.jstree.js"></script>
<script type="text/javascript" src="/media/js/jstree.js"></script>
{% endblock %}
{% block content %}
<h1>Patrimônio por tipo de equipamento</h1>
<div id="theader">
<div class="col1">
Tipo/Descrição
</div>
<div class="col2">
 <div class="menor">Entidade</div>
 <div class="maior">Local</div>
 <div class="maior">Posição</div>
 <div class="medio">Marca</div>
 <div class="menor">Modelo</div>
 <div class="menor">Part number</div>
 <div class="menor">NS</div>
 <div class="menor">Estado</div>
</div>
<div style="clear:both;"> </div>
</div>
<div id="blocos">
</div>
<script type="text/javascript">
$(function() {
    $("#blocos").jstree({
        json_data : {
            ajax: {
		url: function(node) {
                         if (node == -1){
                             return '{% url "patrimonio.views.abre_arvore_tipo" %}';
                         }
		         return '{% url "patrimonio.views.abre_arvore_tipo" %}?id='+node.attr("o_id")+'&model='+node.attr("o_model");
	             },
                type:"get",
		success: function(ops) {
 		    data = [];
		    for (opnum in ops) {
			var op = ops[opnum];
			node = {"data":op["data"], "attr":op["attr"], "state":"closed"};
			data.push(node);
		    }
		    return data;
		}
	    }
	},
        core : {"html_titles" : true,  "load_open" : true },
	plugins : [ "themes", "json_data"]
    });
});
</script>
{% endblock %}
